<style>
.quantity-control {
    display: flex; /* Enables flexbox for horizontal alignment */
    align-items: center; /* Vertically aligns items in the center */
    /* margin-bottom: 1rem; */ /* Optional: Adds some space below the control, adjust as needed */
}

.quantity-button {
    background-color: #f8f9fa; /* Light grey background, adjust to your theme */
    border: 1px solid #ced4da; /* Standard border color */
    color: #495057; /* Text color */
    padding: 0.375rem 0.75rem; /* Padding similar to Bootstrap buttons */
    cursor: pointer;
    font-size: 1rem; /* Adjust font size as needed */
    line-height: 1.5;
    user-select: none; /* Prevents text selection on click */
    min-width: 40px; /* Ensures buttons have a decent minimum width */
    text-align: center;
}

.quantity-button:hover {
    background-color: #e9ecef; /* Slightly darker on hover */
}

/* Style for the decrement button (left) */
#modal-decrement-btn {
    border-top-left-radius: 0.25rem; /* Rounded corners on the left */
    border-bottom-left-radius: 0.25rem;
    border-right: none; /* Remove right border to merge with input */
}

/* Style for the increment button (right) */
#modal-increment-btn {
    border-top-right-radius: 0.25rem; /* Rounded corners on the right */
    border-bottom-right-radius: 0.25rem;
    border-left: none; /* Remove left border to merge with input */
}

.quantity-input {
    width: 60px; /* Adjust width as needed */
    text-align: center;
    border: 1px solid #ced4da; /* Border to match buttons */
    /* Ensure top and bottom borders are present if adjacent button borders are removed */
    border-top: 1px solid #ced4da;
    border-bottom: 1px solid #ced4da;
    padding: 0.375rem 0.75rem; /* Padding */
    font-size: 1rem;
    line-height: 1.5;
    /* Remove spinner buttons for number input if you don't want them */
    -moz-appearance: textfield; /* Firefox */
}

.quantity-input::-webkit-outer-spin-button,
.quantity-input::-webkit-inner-spin-button {
    -webkit-appearance: none; /* Safari and Chrome */
    margin: 0;
}
</style>

<!-- Edit Order Item Modal -->
<div class="modal fade" id="editOrderItemModal" tabindex="-1" aria-labelledby="editOrderItemModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <form id="edit-order-item-form" method="POST" action="{% url 'update_order_item' %}">
        {% csrf_token %}
        <div class="modal-header">
       
          <h5 class="modal-item-name"></h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <input type="hidden" name="item_id" id="modal-item-id">
          <div class="mb-3">
            <label for="modal-quantity" class="form-label">Quantity</label>
            <div class="quantity-control">
              <button type="button" class="quantity-button" id="modal-decrement-btn">-</button>
              <input type="number" class="quantity-input" name="quantity" id="modal-quantity" value="1" min="1" required>
              <button type="button" class="quantity-button" id="modal-increment-btn">+</button>
            </div>
          </div>
          <div class="mb-3">
            <label class="form-label">Extras</label>
            <div id="modal-extras-checkboxes">
              <!-- Checkboxes will be loaded here -->
            </div>
            <input type="hidden" name="extras" id="modal-extras">
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
          <button type="submit" class="btn btn-primary">Save Changes</button>
          <button type="button" class="btn btn-danger" id="delete-order-item-btn">Remove Item</button>
        </div>
      </form>
    </div>
  </div>
</div>
<script>
document.addEventListener('DOMContentLoaded', function() {
    const quantityInput = document.getElementById('modal-quantity');
    const incrementButton = document.getElementById('modal-increment-btn');
    const decrementButton = document.getElementById('modal-decrement-btn');

    if (quantityInput) {
        quantityInput.addEventListener('input', function() {
            if (parseInt(quantityInput.value) < 1 && quantityInput.value !== "") {
                quantityInput.setCustomValidity('The item quantity should be 1 at least.');
            } else {
                quantityInput.setCustomValidity(''); // Clear custom message when valid
            }
        });

        // Also check on form submission attempt if you want to be thorough,
        // though the 'input' event usually covers it for modern browsers.
        const form = document.getElementById('edit-order-item-form');
        if (form) {
            form.addEventListener('submit', function(event) {
                if (quantityInput.value < 1 && quantityInput.value !== "") {
                    quantityInput.setCustomValidity('the item quantity should be 1 at least .');
                    // Optionally, prevent form submission if you want to handle it here,
                    // but browser validation usually stops it.
                    // event.preventDefault(); 
                } else {
                    quantityInput.setCustomValidity('');
                }
            });
        }
    }

    if (incrementButton) {
        incrementButton.addEventListener('click', function() {
            let currentValue = parseInt(quantityInput.value);
            quantityInput.value = currentValue + 1;
            // Trigger input event for validation or other listeners
            quantityInput.dispatchEvent(new Event('input')); 
        });
    }

    if (decrementButton) {
        decrementButton.addEventListener('click', function() {
            let currentValue = parseInt(quantityInput.value);
            if (currentValue > 1) {
                quantityInput.value = currentValue - 1;
                // Trigger input event for validation or other listeners
                quantityInput.dispatchEvent(new Event('input')); 
            }
        });
    }

    // Your existing delete button event listener
    const deleteBtn = document.getElementById('delete-order-item-btn');
    if (deleteBtn) {
        deleteBtn.addEventListener('click', function() {
            const itemId = document.getElementById('modal-item-id').value;
            if (confirm('Are you sure you want to remove this item from your order?')) {
                window.location.href = `/order_details/delete_item/${itemId}/`;
            }
        });
    }
});
</script>